dojo.declare("classes.managers.NummonStatsManager",com.nuclearunicorn.core.TabManager,{game:null,lang:"en",i18ng:null,i18nData:{en:{catnip:"Catnip / Sec",getCatnipInWarmSpring:"During Warm Spring",getCatnipColdWinter:"During Cold Winter",science:"Science",getCelestialPerDay:"Chance of Celestial Events",getCelestialAutoSuccess:"Celestial Event Auto Success Rate",getMaxComped:"Maximum Helpful Compediums",getBlueprintCraft:"Blueprints Per Craft",titanium:"Titanium",getTitPerZebraTrade:"Titanium Per Zebra Trade",getZebraTradesLeftToMaxTit:"Trades Left to Cap Titanium",getZebraTradesToMaxTit:"Max Zebra Trades to Cap Titanium",pollution:"污染",getPollutionTick:"pollution per second",getCoMax:"Max of CO2",unicorns:"Unicorns",getBestUniBuilding:"Best Unicorn Building",getBestAliBuilding:"Best Alicorn Building Per Ivory Cost",getNecrocornsPerSecond:"Necrocorns Per Second",getNecrocornTime:"Time Until Next Necrocorn",getLeviChance:"Chance per year of Leviathans",religion:"Religion",getReligionProductionBonusCap:"Solar Revolution Limit",getlowestRatio:"下一次元超越等级减少的顿悟",getEpiphany:"Progress to Next Transcendence Tier",getRecNextTranscendTierProgress:"Rec.Progress to Next Transcendence Tier",paragon:"Paragon Bonus",getParagonProductionBonus:"Production Bonus",getParagonStorageBonus:"Storage Bonus",time:"Time",getTCPerSacrifice:"Time Crystals per Sacrifice",getRelicPerTCRefine:"Relics Per Time Crystal Refine",resourceRetrieval:"资源回复",getTradeTC:"每跳一年的时间水晶贸易收入",getResourceRetrievalTCBackYears:"下级资源回复亏损至盈利的时间",others:"Others",getBestMagnetoBuilding:"Best Magneto/Steamwork Building",getUraniumForThoriumReactors:"Uranium/Sec for Thorium Reactors",getDarkFutureYears:"Years until Dark Future",getBestRelicBuilding:"Best improve Relic Building",getAIlv15Time:"Time until AI level 15",getFutureSeason:"Seasons until next TemporalParadox",getadjustDay:"Time until 1100 Crypto Price","best.none":"No Building",infinity:"Infinity",sec:"/sec",done:"Done"},zh:{catnip:"猫薄荷 / 秒",getCatnipInWarmSpring:"暖春",getCatnipColdWinter:"寒冬",science:"科学",getCelestialPerDay:"天文事件每天出现的几率",getCelestialAutoSuccess:"天文事件自动观测的几率",getMaxComped:"增加科学库存的概要数量上限",getBlueprintCraft:"每次工艺制作的蓝图",titanium:"钛",getTitPerZebraTrade:"单次斑马贸易的钛期望数量",getZebraTradesLeftToMaxTit:"钛满仓还需要与斑马贸易(次)",getZebraTradesToMaxTit:"钛从零至满仓总共要与斑马贸易(次)",pollution:"污染",getPollutionTick:"二氧化碳排放量",getCoMax:"二氧化碳最大值",unicorns:"独角兽宗教",getBestUniBuilding:"最佳独角兽性价比建筑",getBestAliBuilding:"象牙性价比最高天角兽建筑",getNecrocornsPerSecond:"每秒获得的死灵兽",getNecrocornTime:"距离下一个死灵兽的时间",getLeviChance:"利维坦每年到来降临的几率",religion:"太阳教团",getReligionProductionBonusCap:"太阳革命极限加成",getEpiphany:"当前顿悟值",getAfterAdoreEpiphany:"赞美群星后的顿悟值",getAdoreSloar:"赞美群星再赞美太阳的太阳革命加成",Transcend:"次元超越",getlowestRatio:"进行次元超越的顿悟减少值",getRecNextTranscendTierProgress:"推荐次元超越的当前顿悟值",getBoolean:"赞美群星前(是/否)次元超越",paragon:"领导力加成",getParagonProductionBonus:"生产加成",getParagonStorageBonus:"库存加成",getEffectLeader:"领袖特质效果",time:"时间",getTCPerSacrifice:"每次天角兽献祭的时间水晶值",getRelicPerTCRefine:"每次时间水晶精炼的遗物值",resourceRetrieval:"资源回复",getTradeTC:"当前周期烧水晶的水晶贸易收入",getTradeTCAvg:"平均周期烧水晶的水晶平均收入",getResourceRetrievalTCBackYears:"升级后烧水晶使水晶回本的预计时间",others:"其他",getBestMagnetoBuilding:"最佳磁电机/蒸汽工坊",getUraniumForThoriumReactors:"每秒钍反应堆等效总耗铀",getDarkFutureYears:"距离黑暗未来的惩罚(年)",getBestRelicBuilding:"获取最佳遗物建筑",getBestUnobtainiumBuilding:"难得素最佳太空建筑",getAIlv15Time:"天网觉醒倒计时(现实)",getFutureSeason:"距离下次时间悖论(季节)",getadjustDay:"黑币最高价格期望倒计时(现实)","best.none":"无",infinity:"∞",sec:"/秒",done:"已完成"}},i18n:function(e,t){if("$"==e[0])return this.i18ng(e.slice(1));var i=this.i18nData[this.lang][e];if(!i){if(!(i=this.i18nData.en[e]))return console.error('key "'+e+'" not found'),"$"+e;console.error('key "'+e+'" not found in '+this.lang)}if(t)for(var a=0;a<t.length;a++)i=i.replace("{"+a+"}",t[a]);return i},roundThisNumber:function(e){return e=e*1e3+.5,e=Math.floor(e),e/=1e3},getButton:function(e,t){for(var i in this.game.tabs[e].children)if(this.game.tabs[e].children[i].opts.building==t)return parseInt(i)},getButtonPrice:function(e,t,i,a){var n=this.game[e].meta[t];for(let e=0;e<n.meta.length;e++)if(n.meta[e].name==i){var r=n.meta[e];break}for(let e=0;e<r.prices.length;e++)if(r.prices[e].name==a){var s=r.prices[e].val;break}t=r.priceRatio;return"bld"==e&&(t+=game.getEffect("priceRatio")),s*Math.pow(t,r.on)},makeNiceString:function(e,t=3){if("number"==typeof e&&e!=1/0)for(var i=-1!=(e=(e=(e=e.toFixed(t)).toString()).substr(e.indexOf("."))=="."+Array(t+1).join("0")?e.substr(0,e.indexOf(".")):e).indexOf(".")?e.indexOf(".")-3:e.length-3;0<i;i-=3)e=e.substr(0,i)+","+e.substr(i);else e=e.toString();return e},getPotentialCatnip:function(e){var t,e=this.game.getEffect("catnipPerTickBase")*e+(this.game.village.getResProduction().catnip?this.game.village.getResProduction().catnip*(1+this.game.getEffect("catnipJobRatio")):0),i=(e*=1+this.game.getEffect("catnipRatio"),this.game.challenges.isActive("winterIsComing")?0:this.game.prestige.getParagonProductionRatio()),i=(e=(e=(e*=1+i)*(1+this.game.religion.getSolarRevolutionRatio()*(1+this.game.bld.pollutionEffects.solarRevolutionPollution)))*(1+this.game.getEffect("blsProductionBonus")*this.game.resPool.get("sorrow").value),e=this.game.calendar.cycleEffectsFestival({catnip:e}).catnip,e*=1+this.game.bld.pollutionEffects.catnipPollutionRatio,this.game.village.getResConsumption().catnip);return i*=1+this.game.getEffect("catnipDemandRatio"),0<this.game.village.sim.kittens.length&&1<this.game.village.happiness&&(t=Math.max(this.game.village.happiness*(1+this.game.getEffect("hapinnessConsumptionRatio"))-1,0),this.game.challenges.isActive("anarchy")?i*=1+t*(1+this.game.getEffect("catnipDemandWorkerRatioGlobal")):i*=1+t*(1+this.game.getEffect("catnipDemandWorkerRatioGlobal"))*(1-this.game.village.getFreeKittens()/this.game.village.sim.kittens.length)),e=(e=(e=(e+=i)+this.game.getResourcePerTickConvertion("catnip"))*(1+this.game.timeAccelerationRatio()))*(game.opts.usePerSecondValues?this.game.ticksPerSecond:1)},getCatnipColdWinter:function(){var e,t=this.game.calendar.seasons;for(e in t)if("winter"==t[e].name){var i=t[e].modifiers.catnip;break}return 3<game.calendar.year&&(i=(i-=.15)*(1+this.game.getLimitedDR(this.game.getEffect("coldHarshness"),1)),game.science.getPolicy("communism").researched&&(i=0)),this.getPotentialCatnip(i)},getCatnipInWarmSpring:function(){var e,t=this.game.calendar.seasons;for(e in t)if("spring"==t[e].name){var i=t[e].modifiers.catnip;break}return i=(i+=.15)*(1+this.game.getLimitedDR(this.game.getEffect("springCatnipRatio"),2)),this.getPotentialCatnip(i)},getCelestialPerDay:function(){if(game.bld.getBuildingExt("library").meta.on<=0)return"0%";var e=1;this.game.prestige.getPerk("chronomancy").researched&&(e*=1.1),e*=1+.25*this.game.getEffect("timeRatio");var t=((t=25)+1e4*this.game.getEffect("starEventChance"))*(.01*e);return this.game.prestige.getPerk("astromancy").researched&&(t*=2),game.getDisplayValueExt(t)+"%"},getCelestialAutoSuccess:function(){if(game.bld.getBuildingExt("library").meta.on<=0)return"0%";var e=100*this.game.getEffect("starAutoSuccessChance");return this.game.prestige.getPerk("astromancy").researched&&(e*=2),game.ironWill&&(e=Math.max(25,e)),(e=100<(e=Math.round(e))||this.game.workshop.get("seti").researched?100:e)+"%"},getMaxComped:function(){var e=this.game.bld.getEffect("scienceMax"),t=this.game.bld.getEffect("scienceMaxCompendia"),i=this.game.ironWill?10:1,a=this.game.religion.getTU("blackLibrary"),a=(this.game.prestige.getPerk("codexLeviathanianus").researched&&(i*=1+.05*(1+a.val*(a.effects.compendiaTTBoostRatio+this.game.getEffect("blackLibraryBonus")))*this.game.religion.transcendenceTier),e*i+t);return a/=10},getBlueprintCraft:function(){var e=this.game.getResCraftRatio("blueprint"),t=game.getCraftRatio()!=e,i=game.science.get("physics").researched;return t||i?1+e:this.i18n("best.none")},getTitPerZebraTrade:function(){var e=.7+Math.min(.3,+game.getEffect("standingRatio")+game.diplomacy.calculateStandingFromPolicies("zebras",game)),t=this.game.resPool.get("ship").value;return(1.5+.03*t)*(1+.015*this.game.getEffect("zebraRelationModifier"))*Math.min(.15+.0035*t,1)*e},getZebraTradesLeftToMaxTit:function(){var e=this.getTitPerZebraTrade(),t=this.game.resPool.get("titanium").maxValue;return t-=this.game.resPool.get("titanium").value,t=(t=Math.ceil(t/e))<0?0:t},getPollutionTick:function(){if(!this.game.science.get("ecology").researched&&game.bld.cathPollution<5e6)return this.i18n("best.none");var e,t,i=this.game.opts.forceHighPrecision?3:2,a=this.game.bld.cathPollutionPerTick*this.game.getTicksPerSecondUI();return 0!=this.game.bld.cathPollution&&a?(a*=1e-5,Math.abs(a)<=1?(e=(a=a.toPrecision(i)).toString()).match("e-")&&(t=e.split("e-"),a=Number(e).toFixed(Number(t[1])+i-1)):a=a.toFixed(i),(a<=0?"":"+ ")+a+"/"+$I("unit.sec")):0},getCoMax:function(){if(!this.game.science.get("ecology").researched&&game.bld.cathPollution<6e5)return this.i18n("best.none");var e=100*this.game.bld.getUndissipatedPollutionPerTick(),e=Math.max(e,0);return e=this.game.challenges.isActive("postApocalypse")&&e?"∞":e},getBestUniBuilding:function(e=0){var t="$buildings.unicornPasture.label";if(void 0===this.getButton(0,"unicornPasture"))return this.i18n("best.none");var i,a=["unicornTomb","ivoryTower","ivoryCitadel","skyPalace","unicornUtopia","sunspire"],n=this.game.getEffect("unicornsPerTickBase")*this.game.getTicksPerSecondUI(),r=this.game.getEffect("unicornsGlobalRatio")+1,s=this.game.getEffect("unicornsRatioReligion")+1,g=this.game.prestige.getParagonProductionRatio()+1,o=this.game.religion.getSolarRevolutionRatio()+1,c=1,l=(null!=this.game.calendar.cycles[this.game.calendar.cycle].festivalEffects.unicorns&&this.game.prestige.getPerk("numeromancy").researched&&this.game.calendar.festivalDays&&(c=this.game.calendar.cycles[this.game.calendar.cycle].festivalEffects.unicorns),Math.max(this.game.bld.getBuildingExt("ziggurat").meta.on,1)),m=n*r*(this.game.getEffect("unicornsRatioReligion")+1)*g*o*c,u=500*(1+.1*this.game.getEffect("unicornsRatioReligion")),h=1,f=(this.game.prestige.getPerk("unicornmancy").researched&&(h*=1.1),this.game.getEffect("riftChance")*h/2e4*u),d=1/0,p="",u=this.game.bld.getBuildingExt("unicornPasture").meta.effects.unicornsPerTickBase*this.game.getTicksPerSecondUI()*r*(this.game.getEffect("unicornsRatioReligion")+1)*g*o*c;for(i in(u=this.getButtonPrice("bld",0,"unicornPasture","unicorns")/u)<d&&(d=u,p=t),this.game.tabs[5].zgUpgradeButtons){var v=this.game.tabs[5].zgUpgradeButtons[i];if(-1!=a.indexOf(v.id)&&v.model.visible){var T,P=this.game.religion.getZU(v.id),b=0,R=(b+=[5,25,50,500,5e3,25e3][i]*Math.pow(1.15,this.game.religion.getZU(v.id).on)*2500/l,game.getEffect("unicornsRatioReligion")+1),C=this.game.getEffect("riftChance");for(T in P.effects)"unicornsRatioReligion"==T&&(R+=P.effects[T]),"riftChance"==T&&(C+=P.effects[T]);var y=C*h/2e4*(500*(.1*(R-1)+1)),B=n*r*R*g*o*c;if((B=b/(B-m+(y-=f)))<d){if(!(0<y||s<R&&0<b))return game.religionTab.render();d=B,p=v.id}}}return this.i18n(p=p!=t?"$religion.zu."+p+".label":p)},getBestAliBuilding:function(){var e=["best.none","$religion.zu.skyPalace.label","$religion.zu.unicornUtopia.label","$religion.zu.sunspire.label"];if(!this.game.religion.getZU("skyPalace").unlocked)return this.i18n(e[0]);var t=[1.15**this.game.religion.getZU("skyPalace").val*125,1.15**this.game.religion.getZU("unicornUtopia").val*1e3,1.15**this.game.religion.getZU("sunspire").val*750];return this.i18n(e[t.indexOf(Math.min(...t))+1])},getNecrocornsPerSecond:function(){var e=this.game.resPool.get("alicorn").value,t=(this.game.religion.corruption,1+Math.sqrt(this.game.resPool.get("sorrow").value*this.game.getEffect("blsCorruptionRatio"))),i=1,t=(0<this.game.resPool.get("necrocorn").value&&(i=.25*(1+this.game.getEffect("corruptionBoostRatio"))),i*=this.game.getEffect("corruptionRatio")*t,e<=0&&(i=0),i*=this.game.getTicksPerSecondUI(),this.game.opts.forceHighPrecision?3:2);return(i=+i.toPrecision(t))==1/0?this.i18n("infinity"):i+this.i18n("sec")},getNecrocornTime:function(){var e=this.game.resPool.get("alicorn").value,t=this.game.religion.corruption,i=1+Math.sqrt(this.game.resPool.get("sorrow").value*this.game.getEffect("blsCorruptionRatio")),a=1;return 0<this.game.resPool.get("necrocorn").value&&(a=.25*(1+this.game.getEffect("corruptionBoostRatio"))),a*=this.game.getEffect("corruptionRatio")*i,0==(a=e<=0?t=0:a)?this.i18n("infinity"):this.game.toDisplaySeconds((1-t)/(a*this.game.getTicksPerSecondUI()))},getLeviChance:function(){var e=3.5*this.game.religion.getZU("blackPyramid").getEffectiveValue(this.game)*(1+.1*this.game.religion.getZU("marker").val);return 100<e?"100%":+this.game.getDisplayValueExt(e)+"%"},getReligionProductionBonusCap:function(){var e=100*(10+this.game.getEffect("solarRevolutionLimit")+(this.game.challenges.getChallenge("atheism").researched?this.game.religion.transcendenceTier:0))*(1+this.game.getLimitedDR(this.game.getEffect("faithSolarRevolutionBoost"),4));return this.game.getDisplayValueExt(e)+"%"},getAfterAdoreEpiphany:function(){if(!game.religion.meta[1].meta[8].on)return this.i18n("best.none");var e=this.game.religion.transcendenceTier,t=1;if(this.game.religion.getRU("transcendence").on)t=1+e;else if(e)return"超越没点亲";return this.game.religion.faithRatio+1e-6*this.game.religion.faith*t*t*1.01},getAdoreSloar:function(){if(!game.religion.getRU("solarRevolution").on||!game.religion.meta[1].meta[8].on)return this.i18n("best.none");var e=(this.game.religion.getRU("transcendence").on?this.game.religion.transcendenceTier:0)+1,e=this.game.religion.faithRatio+1e-6*this.game.religion.faith*e*e*1.01,e=.01+this.game.resPool.resources[14].value*(1+.1*game.getUnlimitedDR(e,.1)),e=this.game.getUnlimitedDR(e,1e3)/100,e=(game.opts.forceHighPrecision,this.game.getLimitedDR(e,10+this.game.getEffect("solarRevolutionLimit")+(this.game.challenges.getChallenge("atheism").researched?this.game.religion.transcendenceTier:0))*(1+this.game.getLimitedDR(this.game.getEffect("faithSolarRevolutionBoost"),4))*100);return this.game.getDisplayValueExt(e)+"%"},getlowestRatio:function(){var e=this.game.religion.transcendenceTier+1;return this.game.religion._getTranscendTotalPrice(e)-game.religion._getTranscendTotalPrice(e-1)},getRecNextTranscendTierProgress:function(){if(355<=this.game.religion.transcendenceTier)return"∞";var e=this.game.religion.transcendenceTier+1,t=this.game.religion._getTranscendTotalPrice(e)-game.religion._getTranscendTotalPrice(e-1),i=this.game.religion.getTU("blackObelisk").val,i=(5*e*i+1e3)/(5*this.game.religion.transcendenceTier*i+1e3),e=Math.pow((e+1)/e,2)*i,i=t-.0125+.0125*Math.pow((Math.sqrt((80*e*t+361*e-361+80*t)/(e-1))-19*e)/(1+e),2);return 2.02*game.religion.faith*this.game.religion.transcendenceTier+3.03*game.religion.faith>=1e6*t&&this.game.religion.faithRatio>t?t:Math.max(i,t)},getEpiphany:function(){return this.game.religion.faithRatio},getBoolean:function(){if(!game.religion.getRU("transcendence").on||354<=this.game.religion.transcendenceTier)return this.i18n("best.none");var e=this.game.religion.transcendenceTier+1,t=this.game.religion._getTranscendTotalPrice(e)-game.religion._getTranscendTotalPrice(e-1),i="";return this.game.religion.faithRatio<this.getRecNextTranscendTierProgress()?"否":(i="是",2.02*this.game.religion.faith*(e-1)+3.03*this.game.religion.faith>=1e6*t&&this.game.religion.faithRatio>t?i="是":this.game.religion.faith<1e5&&(i="否（虔诚太少）"),i)},getParagonProductionBonus:function(){var e=100*this.game.prestige.getParagonProductionRatio();return this.game.getDisplayValueExt(e)+"%"},getParagonStorageBonus:function(){return this.game.getDisplayValueExt(100*this.game.prestige.getParagonStorageRatio())+"%"},getEffectLeader:function(){if(!game.village.leader)return this.i18n("best.none");var e=[{name:"faith",val:100},{name:"science",val:100}],t=this.game.village.getEffectLeader(this.game.village.leader.trait.name,e);return 100!=e[0].val?"× "+game.getDisplayValueExt(e[0].val)+"%":100!=e[1].val?"* "+game.getDisplayValueExt(e[1].val)+"%":game.getDisplayValueExt(100*t)+"%"},getTCPerSacrifice:function(){var e=1;return e+=this.game.getEffect("tcRefineRatio")},getRelicPerTCRefine:function(){return 1+this.game.getEffect("relicRefineRatio")*this.game.religion.getZU("blackPyramid").getEffectiveValue(this.game)},getTradeTC:function(){let e=1;this.game.science.getPolicy("monarchy").researched&&(e=1.95);var t,i=.03*(game.village.traits.some(e=>"merchant"===e.name)?1+this.game.prestige.getBurnedParagonRatio():0)*e,i=1+(i+=i+this.game.getEffect("tradeRatio")+this.game.diplomacy.calculateTradeBonusFromPolicies("leviathans",this.game))+this.game.challenges.getChallenge("pacifism").getTradeBonusEffect(this.game),a=this.game.calendar,a=a.ticksPerDay*a.daysPerSeason*a.seasonsPerYear,n=this.game.diplomacy.get("leviathans"),r=1+.02*n.energy;for(t of n.sells)if("timeCrystal"==t.name){var s=t.value*t.chance/n.buys[0].val;break}return s*this.game.getResourcePerTick("unobtainium")*r*i*a*(this.game.getEffect("shatterTCGain")*(1+this.game.getEffect("rrRatio")))},getTradeTCAvg:function(){if(!game.time.getCFU("ressourceRetrieval").val)return 0;var e=this.game.calendar.cycleEffectsFestival({unobtainium:1}).unobtainium,t=this.game.calendar.cycleEffectsBasics({unobtainiumPerTickSpace:1},"moonOutpost").unobtainiumPerTickSpace,e=(this.game.prestige.getPerk("numeromancy").researched&&this.game.calendar.festivalDays?(56.5+12*this.game.getEffect("festivalRatio"))/50:1)*this.getTradeTC()/e/t,t=this.game.getEffect("shatterTCGain")*(1+this.game.getEffect("rrRatio")),i=.04*(1+this.game.getEffect("tcRefineRatio"));return e+4e3*(this.game.getResourcePerTick("alicorn")*i)*t},getResourceRetrievalTCBackYears:function(){var e=1+this.game.getLimitedDR(this.game.getEffect("shatterCostReduction"),1),t=this.game.calendar.cycleEffectsFestival({unobtainium:1}).unobtainium,i=this.game.calendar.cycleEffectsBasics({unobtainiumPerTickSpace:1},"moonOutpost").unobtainiumPerTickSpace,i=this.getTradeTC()/i/t,t=i-100/(100+(this.game.challenges.getChallenge("1000Years").researched?5:10))*e,e=(56.5+12*game.getEffect("festivalRatio"))/50*i,i=this.getButtonPrice("time",0,"ressourceRetrieval","timeCrystal"),a=this.game.time.getCFU("ressourceRetrieval").val;return this.game.time.getCFU("ressourceRetrieval").unlocked?100==a?this.i18n("best.none"):t<=0?"烧水晶收入小于1（支出）":(t=Math.ceil(i*a/e),i=game.time.getCFU("blastFurnace").on,this.game.toDisplaySeconds(t=50*t/(i+.5))):this.i18n("$time.cfu.ressourceRetrieval.label")},getUraniumForThoriumReactors:function(){var e=-.001*(1-game.getEffect("uraniumRatio"))*this.game.bld.getBuildingExt("reactor").meta.on,t=(t=(t=250*(game.getEffect("reactorThoriumPerTick")||-.05)*this.game.bld.getBuildingExt("reactor").meta.on)/(1+this.game.getResCraftRatio("thorium"))+e)*this.game.getTicksPerSecondUI();return game.getDisplayValueExt(t)+this.i18n("sec")},getBestRelicBuilding:function(){if(!this.game.religion.getZU("blackPyramid").val)return this.i18n("$religion.zu.blackPyramid.label");if(!this.game.religion.getTU("blackNexus").on)return this.i18n("$religion.tu.blackNexus.label");var e,t=Math.floor(Math.log((15+this.game.religion.getZU("blackPyramid").getEffectiveValue(this.game))/5)/Math.log(1.15))+1,i=0,a=Math.ceil(this.getButtonPrice("religion",0,"blackPyramid","sorrow"))-this.game.resPool.get("sorrow").maxValue,n=this.getButtonPrice("religion",2,"blackNexus","relic"),r=this.getButtonPrice("religion",2,"blackCore","relic"),s=(Math.pow(1.15,a)-1)/.15*r,g=.001*t/n,o=.001*this.game.religion.getTU("blackNexus").val/s;if(0<a&&o<=g){for(;o<=g&&n<Number.MAX_VALUE/1.15;)g=.001*t/(n*=1.15),o+=.001/s,i++;e=this.i18n("$religion.tu.blackNexus.label")+" +"+i+"个"}else e=this.i18n("$religion.tu.blackCore.label")+" +"+a+"个",a<1&&(e=this.i18n("$religion.zu.blackPyramid.label"));return e},getBestUnobtainiumBuilding:function(){if(!game.science.get("nanotechnology").researched)return this.i18n("best.none");var e=this.getButtonPrice("space",1,"spaceElevator","unobtainium"),t=this.getButtonPrice("space",4,"orbitalArray","eludium"),i=(game.space.getBuilding("spaceElevator").val,game.space.getBuilding("orbitalArray").val,1+this.game.getEffect("spaceRatio")),a=(.01+i)*t*1e3;let n=1;this.game.science.getPolicy("monarchy").researched&&(n=1.95);var r=.075*(game.village.traits.some(e=>"chemist"===e.name)?1+this.game.prestige.getBurnedParagonRatio():0)*n,s=(.02+i)*e*(1+this.game.getCraftRatio("chemist")+r);if(s<=a){if(e>game.resPool.resources[9].maxValue)return"难得素上限了";for(var g=1;s<=a&&e<Number.MAX_VALUE/1.15;)s=(.02+(i+=.01))*(e*=1.15)*(1+this.game.getCraftRatio("chemist")),a=(.01+i)*t*1e3,g++;return $I("space.planet.cath.spaceElevator.label")+" +"+g+"个"}return $I("space.planet.piscine.orbitalArray.label")},getDarkFutureYears:function(){var e=this.game.calendar.darkFutureYears(!0);return e<0?this.game.getDisplayValueExt(-e):this.i18n("done")},getAIlv15Time:function(){if(this.game.science.getPolicy("transkittenism").researched)return this.i18n("best.none");var e=Math.exp(14.5),t=this.game.resPool.get("gflops").value,i=this.game.getEffect("gflopsPerTickBase")-this.game.getEffect("gflopsConsumption");return 15<=this.game.bld.get("aiCore").effects.aiLevel?this.i18n("done"):0<i?this.game.toDisplaySeconds((e-t)/(i*this.game.getTicksPerSecondUI())):this.i18n("infinity")},getFutureSeason:function(){var e=this.game.calendar.futureSeasonTemporalParadox;return 0==this.game.bld.get("chronosphere").on?this.i18n("best.none"):-1==e?1:e+1},getadjustDay:function(){var e;return this.game.science.get("antimatter").researched&&(this.game.science.get("blackchain").researched||0<this.game.resPool.get("blackcoin").value)&&2<(e=Math.floor(Math.log(1100/game.calendar.cryptoPrice)/Math.log(1.0000012495)))?this.game.toDisplaySeconds(2*e):this.i18n("best.none")},stats:{catnip:[{name:"getCatnipInWarmSpring",val:0},{name:"getCatnipColdWinter",title:"大于 0 才不会饿死喵喵呢",val:0}],science:[{name:"getCelestialPerDay",val:0},{name:"getCelestialAutoSuccess",val:0},{name:"getMaxComped",val:0},{name:"getBlueprintCraft",val:0}],titanium:[{name:"getTitPerZebraTrade",title:"与贸易船有关哦🚢",val:0},{name:"getZebraTradesLeftToMaxTit",val:0}],pollution:[{name:"getPollutionTick",val:0},{name:"getCoMax",val:0}],unicorns:[{name:"getBestUniBuilding",val:0},{name:"getNecrocornsPerSecond",val:0},{name:"getLeviChance",val:0}],religion:[{name:"getReligionProductionBonusCap",val:0},{name:"getEpiphany",val:0},{name:"getAfterAdoreEpiphany",val:0},{name:"getAdoreSloar",title:"供珂学家赞美群星触发条件参考",val:0}],Transcend:[{name:"getlowestRatio",val:0},{name:"getRecNextTranscendTierProgress",title:"有这么多顿悟再次元超越是最效率的喵~",val:0},{name:"getBoolean",val:0}],paragon:[{name:"getParagonProductionBonus",val:0},{name:"getParagonStorageBonus",val:0},{name:"getEffectLeader",val:0}],time:[{name:"getTCPerSacrifice",val:0},{name:"getRelicPerTCRefine",val:0}],resourceRetrieval:[{name:"getTradeTC",title:"计算资源回复下每烧1年，当前周期难得素通过贸易利维的时间水晶期望收入",val:0},{name:"getTradeTCAvg",title:"计算资源回复下每烧1年，平均周期下难得素通过贸易利维坦和天角兽的时间水晶期望收入",val:0},{name:"getResourceRetrievalTCBackYears",title:"资源回复的回本时间，仅供参考",val:0}],others:[{name:"getUraniumForThoriumReactors",val:0},{name:"getDarkFutureYears",val:0},{name:"getBestRelicBuilding",val:0},{name:"getBestUnobtainiumBuilding",val:0},{name:"getAIlv15Time",title:"小心机器人",val:0},{name:"getFutureSeason",title:"非酋程度",val:0},{name:"getadjustDay",val:0}]},statDefinitions:[{name:"catnip"},{name:"science"},{name:"titanium"},{name:"pollution"},{name:"unicorns"},{name:"religion"},{name:"Transcend"},{name:"paragon"},{name:"time"},{name:"resourceRetrieval"},{name:"others"}],statGroups:null,constructor:function(e,t,i){this.game=e,this.i18ng=t,this.statGroups=[];var a,n=this;for(a in i&&this.i18nData[i]?this.lang=i:this.lang="en",this.statDefinitions.forEach(function(e){n.statGroups.push({group:n.stats[e.name],title:n.i18n(e.name)})}),this.statGroups)for(var r in this.statGroups[a].group)this.statGroups[a].group[r].calculate=this[this.statGroups[a].group[r].name]},getStat:function(e){return this[e]()},save:function(e){},load:function(e){},resetState:function(){}}),dojo.declare("classes.tab.NummonTab",com.nuclearunicorn.game.ui.tab,{container:null,constructor:function(e){},render:function(e){this.container=e,game.religionTab.render(),this.update()},update:function(){for(var e in dojo.empty(this.container),this.game.nummon.statGroups){var t,e=this.game.nummon.statGroups[e],i=(dojo.create("h1",{innerHTML:e.title},this.container),e.group),a=dojo.create("table",{class:"statTable"},this.container);for(t in i){var n=i[t],r=n.val,s=(r==1/0&&(r="Infinity"),n.val=this.game.nummon[n.name](),dojo.create("tr",null,a));dojo.create("td",{innerHTML:this.game.nummon.i18n(n.name),title:n.title||""},s),dojo.create("td",{innerHTML:"number"==typeof r?this.game.getDisplayValueExt(r):r},s)}}}});var NummonInit=function(){var e=$I,t=localStorage["com.nuclearunicorn.kittengame.language"],i=[{id:"nummon",class:"NummonStatsManager"}];for(n in i){var a=i[n];null==gamePage[a.id]?(gamePage[a.id]=new window.classes.managers[a.class](gamePage,e,t),gamePage.managers.push(gamePage[a.id])):gamePage[a.id]=new window.classes.managers[a.class](gamePage,e,t)}gamePage.nummonTab=new classes.tab.NummonTab({name:"Nummon",id:"Nummon"},gamePage);var n,r=!(gamePage.nummonTab.visible=!0);for(n in gamePage.tabs)"Nummon"==gamePage.tabs[n].tabId&&(gamePage.tabs[n],gamePage.nummonTab,r=!0);r||gamePage.addTab(gamePage.nummonTab),"zh"==localStorage["com.nuclearunicorn.kittengame.language"]&&(gamePage.nummonTab.tabName="概览"),gamePage.render(!0),gamePage.getTab=function(e){switch(e){case"science":return this.libraryTab;case"village":return this.villageTab;case"workshop":return this.workshopTab;case"space":return this.spaceTab;case"stats":return this.statsTab;case"nummon":return this.nummonTab;case"time":return this.timeTab;case"challenges":return this.challengesTab}}},NummonTryInit=function(){"undefined"==typeof gamePage?setTimeout(function(){NummonTryInit()},2e3):NummonInit()};NummonTryInit();