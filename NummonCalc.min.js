dojo.declare("classes.managers.NummonStatsManager",com.nuclearunicorn.core.TabManager,{game:null,lang:"en",i18ng:null,i18nData:{en:{catnip:"Catnip / Sec",getCatnipInWarmSpring:"During Warm Spring",getCatnipColdWinter:"During Cold Winter",science:"Science",getCelestialPerDay:"Chance of Celestial Events",getCelestialAutoSuccess:"Celestial Event Auto Success Rate",getMaxComped:"Maximum Helpful Compediums",getBlueprintCraft:"Blueprints Per Craft",titanium:"Titanium",getTitPerZebraTrade:"Titanium Per Zebra Trade",getZebraTradesLeftToMaxTit:"Trades Left to Cap Titanium",getZebraTradesToMaxTit:"Max Zebra Trades to Cap Titanium",pollution:"æ±¡æŸ“",getPollutionTick:"pollution per second",getCoMax:"Max of CO2",unicorns:"Unicorns",getBestUniBuilding:"Best Unicorn Building",getBestAliBuilding:"Best Alicorn Building Per Ivory Cost",getNecrocornsPerSecond:"Necrocorns Per Second",getNecrocornTime:"Time Until Next Necrocorn",getLeviChance:"Chance per year of Leviathans",religion:"Religion",getReligionProductionBonusCap:"Solar Revolution Limit",getlowestRatio:"ä¸‹ä¸€æ¬¡å…ƒè¶…è¶Šç­‰çº§å‡å°‘çš„é¡¿æ‚Ÿ",getEpiphany:"Progress to Next Transcendence Tier",getRecNextTranscendTierProgress:"Rec.Progress to Next Transcendence Tier",paragon:"Paragon Bonus",getParagonProductionBonus:"Production Bonus",getParagonStorageBonus:"Storage Bonus",time:"Time",getTCPerSacrifice:"Time Crystals per Sacrifice",getRelicPerTCRefine:"Relics Per Time Crystal Refine",resourceRetrieval:"èµ„æºå›å¤",getTradeTC:"æ¯è·³ä¸€å¹´çš„æ—¶é—´æ°´æ™¶è´¸æ˜“æ”¶å…¥",getResourceRetrievalTCBackYears:"ä¸‹çº§èµ„æºå›å¤äºæŸè‡³ç›ˆåˆ©çš„æ—¶é—´",others:"Others",getBestMagnetoBuilding:"Best Magneto/Steamwork Building",getUraniumForThoriumReactors:"Uranium/Sec for Thorium Reactors",getDarkFutureYears:"Years until Dark Future",getBestRelicBuilding:"Best improve Relic Building",getAIlv15Time:"Time until AI level 15",getFutureSeason:"Seasons until next TemporalParadox",getadjustDay:"Time until 1100 Crypto Price","best.none":"No Building",infinity:"Infinity",sec:"/sec",done:"Done"},zh:{catnip:"çŒ«è–„è· / ç§’",getCatnipInWarmSpring:"æš–æ˜¥",getCatnipColdWinter:"å¯’å†¬",science:"ç§‘å­¦",getCelestialPerDay:"å¤©æ–‡äº‹ä»¶æ¯å¤©å‡ºç°çš„å‡ ç‡",getCelestialAutoSuccess:"å¤©æ–‡äº‹ä»¶è‡ªåŠ¨è§‚æµ‹çš„å‡ ç‡",getMaxComped:"å¢åŠ ç§‘å­¦åº“å­˜çš„æ¦‚è¦æ•°é‡ä¸Šé™",getBlueprintCraft:"æ¯æ¬¡å·¥è‰ºåˆ¶ä½œçš„è“å›¾",titanium:"é’›",getTitPerZebraTrade:"å•æ¬¡æ–‘é©¬è´¸æ˜“çš„é’›æœŸæœ›æ•°é‡",getZebraTradesLeftToMaxTit:"é’›æ»¡ä»“è¿˜éœ€è¦ä¸æ–‘é©¬è´¸æ˜“(æ¬¡)",getZebraTradesToMaxTit:"é’›ä»é›¶è‡³æ»¡ä»“æ€»å…±è¦ä¸æ–‘é©¬è´¸æ˜“(æ¬¡)",pollution:"æ±¡æŸ“",getPollutionTick:"äºŒæ°§åŒ–ç¢³æ’æ”¾é‡",getCoMax:"äºŒæ°§åŒ–ç¢³æœ€å¤§å€¼",unicorns:"ç‹¬è§’å…½å®—æ•™",getBestUniBuilding:"æœ€ä½³ç‹¬è§’å…½æ€§ä»·æ¯”å»ºç­‘",getBestAliBuilding:"è±¡ç‰™æ€§ä»·æ¯”æœ€é«˜å¤©è§’å…½å»ºç­‘",getNecrocornsPerSecond:"æ¯ç§’è·å¾—çš„æ­»çµå…½",getNecrocornTime:"è·ç¦»ä¸‹ä¸€ä¸ªæ­»çµå…½çš„æ—¶é—´",getLeviChance:"åˆ©ç»´å¦æ¯å¹´åˆ°æ¥é™ä¸´çš„å‡ ç‡",religion:"å¤ªé˜³æ•™å›¢",getReligionProductionBonusCap:"å¤ªé˜³é©å‘½æé™åŠ æˆ",getEpiphany:"å½“å‰é¡¿æ‚Ÿå€¼",getAfterAdoreEpiphany:"èµç¾ç¾¤æ˜Ÿåçš„é¡¿æ‚Ÿå€¼",getAdoreSloar:"èµç¾ç¾¤æ˜Ÿå†èµç¾å¤ªé˜³çš„å¤ªé˜³é©å‘½åŠ æˆ",Transcend:"æ¬¡å…ƒè¶…è¶Š",getlowestRatio:"è¿›è¡Œæ¬¡å…ƒè¶…è¶Šçš„é¡¿æ‚Ÿå‡å°‘å€¼",getRecNextTranscendTierProgress:"æ¨èæ¬¡å…ƒè¶…è¶Šçš„å½“å‰é¡¿æ‚Ÿå€¼",getBoolean:"èµç¾ç¾¤æ˜Ÿå‰(æ˜¯/å¦)æ¬¡å…ƒè¶…è¶Š",paragon:"é¢†å¯¼åŠ›åŠ æˆ",getParagonProductionBonus:"ç”Ÿäº§åŠ æˆ",getParagonStorageBonus:"åº“å­˜åŠ æˆ",getEffectLeader:"é¢†è¢–ç‰¹è´¨æ•ˆæœ",time:"æ—¶é—´",getTCPerSacrifice:"æ¯æ¬¡å¤©è§’å…½çŒ®ç¥­çš„æ—¶é—´æ°´æ™¶å€¼",getRelicPerTCRefine:"æ¯æ¬¡æ—¶é—´æ°´æ™¶ç²¾ç‚¼çš„é—ç‰©å€¼",resourceRetrieval:"èµ„æºå›å¤",getTradeTC:"å½“å‰å‘¨æœŸçƒ§æ°´æ™¶çš„æ°´æ™¶è´¸æ˜“æ”¶å…¥",getTradeTCAvg:"å¹³å‡å‘¨æœŸçƒ§æ°´æ™¶çš„æ°´æ™¶å¹³å‡æ”¶å…¥",getResourceRetrievalTCBackYears:"å‡çº§åçƒ§æ°´æ™¶ä½¿æ°´æ™¶å›æœ¬çš„é¢„è®¡æ—¶é—´",others:"å…¶ä»–",getBestMagnetoBuilding:"æœ€ä½³ç£ç”µæœº/è’¸æ±½å·¥åŠ",getUraniumForThoriumReactors:"æ¯ç§’é’ååº”å †ç­‰æ•ˆæ€»è€—é“€",getDarkFutureYears:"è·ç¦»é»‘æš—æœªæ¥çš„æƒ©ç½š(å¹´)",getBestRelicBuilding:"è·å–æœ€ä½³é—ç‰©å»ºç­‘",getBestUnobtainiumBuilding:"éš¾å¾—ç´ æœ€ä½³å¤ªç©ºå»ºç­‘",getAIlv15Time:"å¤©ç½‘è§‰é†’å€’è®¡æ—¶(ç°å®)",getFutureSeason:"è·ç¦»ä¸‹æ¬¡æ—¶é—´æ‚–è®º(å­£èŠ‚)",getadjustDay:"é»‘å¸æœ€é«˜ä»·æ ¼æœŸæœ›å€’è®¡æ—¶(ç°å®)","best.none":"æ— ",infinity:"âˆ",sec:"/ç§’",done:"å·²å®Œæˆ"}},i18n:function(e,t){if(e[0]=="$"){return this.i18ng(e.slice(1))}var a=this.i18nData[this.lang][e];if(!a){a=this.i18nData["en"][e];if(!a){console.error('key "'+e+'" not found');return"$"+e}console.error('key "'+e+'" not found in '+this.lang)}if(t){for(var i=0;i<t.length;i++){a=a.replace("{"+i+"}",t[i])}}return a},roundThisNumber:function(e){e*=1e3;e+=.5;e=Math.floor(e);e/=1e3;return e},getButton:function(e,t){for(var a in this.game.tabs[e].children){if(this.game.tabs[e].children[a].opts.building==t){return parseInt(a)}}},getButtonPrice:function(e,t,a,i){var r=this.game[e].meta[t];for(let e=0;e<r.meta.length;e++){if(r.meta[e].name==a){var n=r.meta[e];break}}for(let e=0;e<n.prices.length;e++){if(n.prices[e].name==i){var s=n.prices[e].val;break}}var g=n.priceRatio;if(e=="bld"){g+=game.getEffect("priceRatio")}return s*Math.pow(g,n.on)},makeNiceString:function(e,t=3){if(typeof e=="number"&&e!=Infinity){e=e.toFixed(t);e=e.toString();var a=e.substr(e.indexOf("."));if(a=="."+Array(t+1).join("0")){e=e.substr(0,e.indexOf("."))}for(var i=e.indexOf(".")==-1?e.length-3:e.indexOf(".")-3;i>0;i-=3){e=e.substr(0,i)+","+e.substr(i)}}else{e=e.toString()}return e},getPotentialCatnip:function(e){var t=this.game.getEffect("catnipPerTickBase")*e;var a=this.game.village.getResProduction().catnip?this.game.village.getResProduction().catnip*(1+this.game.getEffect("catnipJobRatio")):0;var i=t+a;i*=1+this.game.getEffect("catnipRatio");var r=this.game.challenges.isActive("winterIsComing")?0:this.game.prestige.getParagonProductionRatio();i*=1+r;i*=1+this.game.religion.getSolarRevolutionRatio()*(1+this.game.bld.pollutionEffects["solarRevolutionPollution"]);i*=1+this.game.getEffect("blsProductionBonus")*this.game.resPool.get("sorrow").value;i=this.game.calendar.cycleEffectsFestival({catnip:i})["catnip"];i*=1+this.game.bld.pollutionEffects["catnipPollutionRatio"];var n=this.game.village.getResConsumption()["catnip"];n*=1+this.game.getEffect("catnipDemandRatio");if(this.game.village.sim.kittens.length>0&&this.game.village.happiness>1){var s=Math.max(this.game.village.happiness*(1+this.game.getEffect("hapinnessConsumptionRatio"))-1,0);if(this.game.challenges.isActive("anarchy")){n*=1+s*(1+this.game.getEffect("catnipDemandWorkerRatioGlobal"))}else{n*=1+s*(1+this.game.getEffect("catnipDemandWorkerRatioGlobal"))*(1-this.game.village.getFreeKittens()/this.game.village.sim.kittens.length)}}i+=n;i+=this.game.getResourcePerTickConvertion("catnip");i*=1+this.game.timeAccelerationRatio();i*=game.opts.usePerSecondValues?this.game.ticksPerSecond:1;return i},getCatnipColdWinter:function(){var e=this.game.calendar.seasons;for(var t in e){if(e[t].name=="winter"){var a=e[t].modifiers.catnip;break}}if(game.calendar.year>3){a-=.15;a*=1+this.game.getLimitedDR(this.game.getEffect("coldHarshness"),1);if(game.science.getPolicy("communism").researched){a=0}}var i=this.getPotentialCatnip(a);return i},getCatnipInWarmSpring:function(){var e=this.game.calendar.seasons;for(var t in e){if(e[t].name=="spring"){var a=e[t].modifiers.catnip;break}}a+=.15;a*=1+this.game.getLimitedDR(this.game.getEffect("springCatnipRatio"),2);var i=this.getPotentialCatnip(a);return i},getCelestialPerDay:function(){if(game.bld.getBuildingExt("library").meta.on<=0){return"0%"}var e=1;if(this.game.prestige.getPerk("chronomancy").researched){e*=1.1}e*=1+this.game.getEffect("timeRatio")*.25;var t=25;t+=this.game.getEffect("starEventChance")*1e4;t*=e*.01;if(this.game.prestige.getPerk("astromancy").researched){t*=2}return game.getDisplayValueExt(t)+"%"},getCelestialAutoSuccess:function(){if(game.bld.getBuildingExt("library").meta.on<=0){return"0%"}var e=this.game.getEffect("starAutoSuccessChance")*100;if(this.game.prestige.getPerk("astromancy").researched){e*=2}if(game.ironWill){e=Math.max(25,e)}e=Math.round(e);if(e>100||this.game.workshop.get("seti").researched){e=100}return e+"%"},getMaxComped:function(){var e=this.game.bld.getEffect("scienceMax");var t=this.game.bld.getEffect("scienceMaxCompendia");var a=this.game.ironWill?10:1;var i=this.game.religion.getTU("blackLibrary");if(this.game.prestige.getPerk("codexLeviathanianus").researched){var r=.05*(1+i.val*(i.effects["compendiaTTBoostRatio"]+this.game.getEffect("blackLibraryBonus")));a*=1+r*this.game.religion.transcendenceTier}var n=e*a+t;n/=10;return n},getBlueprintCraft:function(){var e=this.game.getResCraftRatio("blueprint");var t=game.getCraftRatio()!=e;var a=game.science.get("physics").researched;if(t||a){return 1+e}else{return this.i18n("best.none")}},getTitPerZebraTrade:function(){let e=.7+Math.min(.3,+game.getEffect("standingRatio")+game.diplomacy.calculateStandingFromPolicies("zebras",game));var t=this.game.resPool.get("ship").value;var a=this.game.getEffect("zebraRelationModifier")*.015;var i=(1.5+t*.03)*(1+a)*Math.min(.15+t*.0035,1)*e;return i},getZebraTradesLeftToMaxTit:function(){var e=this.getTitPerZebraTrade();var t=this.game.resPool.get("titanium").maxValue;t-=this.game.resPool.get("titanium").value;t=Math.ceil(t/e);if(t<0){t=0}return t},getPollutionTick:function(){var e=this.game.opts.forceHighPrecision?3:2;var t=this.game.bld.cathPollutionPerTick*this.game.getTicksPerSecondUI();if(this.game.bld.cathPollution==0||!t){return 0}t*=1e-5;if(Math.abs(t)<=1){t=t.toPrecision(e);var a=t.toString();if(a.match("e-")){var i=a.split("e-");t=Number(a).toFixed(Number(i[1])+e-1)}}else{t=t.toFixed(e)}var r="+ ";if(t<=0){r=""}return r+t+"/"+$I("unit.sec")},getCoMax:function(){var e=this.game.bld.getUndissipatedPollutionPerTick()*100;var t=Math.max(e,0);if(this.game.challenges.isActive("postApocalypse")&&t){t="âˆ"}return t},getBestUniBuilding:function(e=false){var t="$buildings.unicornPasture.label";var a=this.getButton(0,"unicornPasture");if(typeof a==="undefined"){return this.i18n("best.none")}var i=["unicornTomb","ivoryTower","ivoryCitadel","skyPalace","unicornUtopia","sunspire"];var r=this.game.getEffect("unicornsPerTickBase")*this.game.getTicksPerSecondUI();var n=this.game.getEffect("unicornsGlobalRatio")+1;var s=this.game.getEffect("unicornsRatioReligion")+1;var g=this.game.prestige.getParagonProductionRatio()+1;var o=this.game.religion.getSolarRevolutionRatio()+1;var l=1;if(this.game.calendar.cycles[this.game.calendar.cycle].festivalEffects["unicorns"]!=undefined){if(this.game.prestige.getPerk("numeromancy").researched&&this.game.calendar.festivalDays){l=this.game.calendar.cycles[this.game.calendar.cycle].festivalEffects["unicorns"]}}var c=Math.max(this.game.bld.getBuildingExt("ziggurat").meta.on,1);var m=r*n*(this.game.getEffect("unicornsRatioReligion")+1)*g*o*l;var u=500*(1+this.game.getEffect("unicornsRatioReligion")*.1);var h=1;if(this.game.prestige.getPerk("unicornmancy").researched){h*=1.1}var f=this.game.getEffect("riftChance")*h/(1e4*2)*u;var v=Infinity;var d="";var p=this.game.bld.getBuildingExt("unicornPasture").meta.effects["unicornsPerTickBase"]*this.game.getTicksPerSecondUI();p=p*n*(this.game.getEffect("unicornsRatioReligion")+1)*g*o*l;p=this.getButtonPrice("bld",0,"unicornPasture","unicorns")/p;if(p<v){v=p;d=t}for(var T in this.game.tabs[5].zgUpgradeButtons){var P=this.game.tabs[5].zgUpgradeButtons[T];if(i.indexOf(P.id)!=-1){if(P.model.visible){var b=this.game.religion.getZU(P.id);var R=0;var y=[5,25,50,500,5e3,25e3];R+=y[T]*Math.pow(1.15,this.game.religion.getZU(P.id).on)*2500/c;var C=game.getEffect("unicornsRatioReligion")+1;var E=this.game.getEffect("riftChance");for(var B in b.effects){if(B=="unicornsRatioReligion"){C+=b.effects[B]}if(B=="riftChance"){E+=b.effects[B]}}var k=500*((C-1)*.1+1);var x=E*h/(1e4*2)*k;x-=f;var S=r*n*C*g*o*l;S-=m;S+=x;S=R/S;if(S<v){if(x>0||C>s&&R>0){v=S;d=P.id}else{return game.religionTab.render()}}}}}if(d!=t){d="$religion.zu."+d+".label"}return this.i18n(d)},getBestAliBuilding:function(){var e=["best.none","$religion.zu.skyPalace.label","$religion.zu.unicornUtopia.label","$religion.zu.sunspire.label"];if(!this.game.religion.getZU("skyPalace").unlocked){return this.i18n(e[0])}var t=1.15**this.game.religion.getZU("skyPalace").val*125;var a=1.15**this.game.religion.getZU("unicornUtopia").val*1e3;var i=1.15**this.game.religion.getZU("sunspire").val*750;var r=[t,a,i];return this.i18n(e[r.indexOf(Math.min(...r))+1])},getNecrocornsPerSecond:function(){var e=this.game.resPool.get("alicorn").value;var t=this.game.religion.corruption;var a=1+Math.sqrt(this.game.resPool.get("sorrow").value*this.game.getEffect("blsCorruptionRatio"));var i=1;if(this.game.resPool.get("necrocorn").value>0){i=.25*(1+this.game.getEffect("corruptionBoostRatio"))}i*=this.game.getEffect("corruptionRatio")*a;if(e<=0){t=0;i=0}i*=this.game.getTicksPerSecondUI();var r=this.game.opts.forceHighPrecision?3:2;i=i.toPrecision(r)*1;if(i==Infinity){return this.i18n("infinity")}return i+this.i18n("sec")},getNecrocornTime:function(){var e=this.game.resPool.get("alicorn").value;var t=this.game.religion.corruption;var a=1+Math.sqrt(this.game.resPool.get("sorrow").value*this.game.getEffect("blsCorruptionRatio"));var i=1;if(this.game.resPool.get("necrocorn").value>0){i=.25*(1+this.game.getEffect("corruptionBoostRatio"))}i*=this.game.getEffect("corruptionRatio")*a;if(e<=0){t=0;i=0}if(i==0){return this.i18n("infinity")}return this.game.toDisplaySeconds((1-t)/(i*this.game.getTicksPerSecondUI()))},getLeviChance:function(){var e=this.game.religion.getZU("blackPyramid").getEffectiveValue(this.game);var t=this.game.religion.getZU("marker").val;var a=3.5*e*(1+.1*t);if(a>100){return a=100+"%"}else{return this.game.getDisplayValueExt(a)*1+"%"}},getReligionProductionBonusCap:function(){var e=100*(10+this.game.getEffect("solarRevolutionLimit")+(this.game.challenges.getChallenge("atheism").researched?this.game.religion.transcendenceTier:0))*(1+this.game.getLimitedDR(this.game.getEffect("faithSolarRevolutionBoost"),4));return this.game.getDisplayValueExt(e)+"%"},getAfterAdoreEpiphany:function(){if(!game.religion.meta[1].meta[8].on){return game.religion.meta[1].meta[8].label}var e=this.game.religion.transcendenceTier;var t=1;if(this.game.religion.getRU("transcendence").on){t=1+e}else if(e){return"è¶…è¶Šæ²¡ç‚¹äº²"}var a=this.game.religion.faithRatio;return a+this.game.religion.faith*1e-6*t*t*1.01},getAdoreSloar:function(){if(!game.religion.getRU("solarRevolution").on||!game.religion.meta[1].meta[8].on){return this.i18n("best.none")}var e=(this.game.religion.getRU("transcendence").on?this.game.religion.transcendenceTier:0)+1;var t=this.game.religion.faithRatio+this.game.religion.faith*1e-6*e*e*1.01;var a=this.game.resPool.resources[14].value;var i=.01+a*(1+game.getUnlimitedDR(t,.1)*.1);var r=this.game.getUnlimitedDR(i,1e3)/100;var n=game.opts.forceHighPrecision?3:2;var s=this.game.getLimitedDR(r,10+this.game.getEffect("solarRevolutionLimit")+(this.game.challenges.getChallenge("atheism").researched?this.game.religion.transcendenceTier:0))*(1+this.game.getLimitedDR(this.game.getEffect("faithSolarRevolutionBoost"),4))*100;return this.game.getDisplayValueExt(s)+"%"},getlowestRatio:function(){var e=this.game.religion.transcendenceTier+1;var t=this.game.religion._getTranscendTotalPrice(e)-game.religion._getTranscendTotalPrice(e-1);return t},getRecNextTranscendTierProgress:function(){if(this.game.religion.transcendenceTier>=355){return"âˆ"}var e=this.game.religion.transcendenceTier+1;var t=this.game.religion._getTranscendTotalPrice(e)-game.religion._getTranscendTotalPrice(e-1);var a=this.game.religion.getTU("blackObelisk").val;var i=(e*5*a+1e3)/(this.game.religion.transcendenceTier*5*a+1e3);if(game.getEffect("shatterTCGain")>.07){i=1}var r=Math.pow((e+1)/e,2);var n=r*i;var s=t;var g=n;var o=s-.0125+.0125*Math.pow((Math.sqrt((80*g*s+361*g-361+80*s)/(g-1))-19*g)/(g+1),2);if(game.religion.faith*2.02*this.game.religion.transcendenceTier+3.03*game.religion.faith>=1e6*t&&this.game.religion.faithRatio>t){return t}else{return Math.max(o,t)}},getEpiphany:function(){return this.game.religion.faithRatio},getBoolean:function(){if(this.game.religion.transcendenceTier>=354){return this.i18n("best.none")}if(!game.religion.getRU("transcendence").on){return"äº²è¶…è¶Šæ²¡ç‚¹"}var e=this.game.religion.transcendenceTier+1;var t=this.game.religion._getTranscendTotalPrice(e)-game.religion._getTranscendTotalPrice(e-1);var a="";if(this.game.religion.faithRatio<this.getRecNextTranscendTierProgress()){return"å¦"}else{a="æ˜¯"}if(this.game.religion.faith*2.02*(e-1)+3.03*this.game.religion.faith>=1e6*t&&this.game.religion.faithRatio>t){a="æ˜¯"}else if(this.game.religion.faith<1e5&&!a){a="å¦ï¼ˆè™”è¯šå¤ªå°‘ï¼‰"}return a},getParagonProductionBonus:function(){var e=this.game.prestige.getParagonProductionRatio()*100;return this.game.getDisplayValueExt(e)+"%"},getParagonStorageBonus:function(){return this.game.getDisplayValueExt(this.game.prestige.getParagonStorageRatio()*100)+"%"},getEffectLeader:function(){if(!game.village.leader){return this.i18n("best.none")}let e=[{name:"faith",val:100},{name:"science",val:100}];let t=this.game.village.getEffectLeader(this.game.village.leader.trait.name,e);if(e[0].val!=100){return"Ã— "+game.getDisplayValueExt(e[0].val)+"%"}else if(e[1].val!=100){return"* "+game.getDisplayValueExt(e[1].val)+"%"}else{return game.getDisplayValueExt(t*100)+"%"}},getTCPerSacrifice:function(){var e=this.game.getEffect("tcRefineRatio")+1;var t=Math.floor(game.resPool.resourceMap["alicorn"].value/25)*e;var a=game.getDisplayValueExt(e)+"  ( "+game.getDisplayValueExt(t)+")";return a},getRelicPerTCRefine:function(){var e=1+this.game.getEffect("relicRefineRatio")*this.game.religion.getZU("blackPyramid").getEffectiveValue(this.game);return game.getDisplayValueExt(e)+"  ("+game.getDisplayValueExt(Math.floor(game.resPool.resourceMap["timeCrystal"].value/25)*e)+")"},getTradeTC:function(){let e=1;if(this.game.science.getPolicy("monarchy").researched){e=1.95}let t=game.village.traits.some(e=>e.name==="merchant")?1+this.game.prestige.getBurnedParagonRatio():0;t=.03*t*e;t+=t+this.game.getEffect("tradeRatio")+this.game.diplomacy.calculateTradeBonusFromPolicies("leviathans",this.game);var a=1+t+this.game.challenges.getChallenge("pacifism").getTradeBonusEffect(this.game);var i=this.game.calendar;var r=i.ticksPerDay*i.daysPerSeason*i.seasonsPerYear;var n=this.game.diplomacy.get("leviathans");var s=1+.02*n.energy;for(var g of n.sells){if(g.name=="timeCrystal"){var o=g.value*g.chance/n.buys[0].val;break}}var l=o*this.game.getResourcePerTick("unobtainium")*s*a;var c=this.game.getEffect("shatterTCGain")*(1+this.game.getEffect("rrRatio"));var m=l*r*c;return m},getTradeTCAvg:function(){if(!game.time.getCFU("ressourceRetrieval").val){return 0}var e=this.game.calendar.cycleEffectsFestival({unobtainium:1})["unobtainium"];var t=this.game.calendar.cycleEffectsBasics({unobtainiumPerTickSpace:1},"moonOutpost")["unobtainiumPerTickSpace"];var a=this.game.prestige.getPerk("numeromancy").researched&&this.game.calendar.festivalDays?(56.5+12*this.game.getEffect("festivalRatio"))/50:1;var i=a*this.getTradeTC()/e/t;var r=this.game.getEffect("shatterTCGain")*(1+this.game.getEffect("rrRatio"));var n=.04*(1+this.game.getEffect("tcRefineRatio"));var s=this.game.getResourcePerTick("alicorn")*n;var g=s*4e3*r;var o=i+g;return o},getResourceRetrievalTCBackYears:function(){var e=1+this.game.getLimitedDR(this.game.getEffect("shatterCostReduction"),1);var t=this.game.calendar.cycleEffectsFestival({unobtainium:1})["unobtainium"];var a=this.game.calendar.cycleEffectsBasics({unobtainiumPerTickSpace:1},"moonOutpost")["unobtainiumPerTickSpace"];var i=this.getTradeTC()/a/t;var r=this.game.challenges.getChallenge("1000Years").researched?5:10;var n=100/(100+r);var s=i-n*e;var g=(56.5+12*game.getEffect("festivalRatio"))/50;var o=g*i;var l=this.getButtonPrice("time",0,"ressourceRetrieval","timeCrystal");var c=this.game.time.getCFU("ressourceRetrieval").val;if(!this.game.time.getCFU("ressourceRetrieval").unlocked){return this.i18n("$time.cfu.ressourceRetrieval.label")}else if(c==100){return this.i18n("best.none")}else if(s<=0){return"çƒ§æ°´æ™¶æ”¶å…¥å°äº1ï¼ˆæ”¯å‡ºï¼‰"}else{var m=Math.ceil(l*c/o);var u=game.time.getCFU("blastFurnace").on;m=50*m/(u+.5);return this.game.toDisplaySeconds(m)}},getUraniumForThoriumReactors:function(){var e=-.001*(1-game.getEffect("uraniumRatio"))*this.game.bld.getBuildingExt("reactor").meta.on;var t=game.getEffect("reactorThoriumPerTick")||-.05;var a=250*t*this.game.bld.getBuildingExt("reactor").meta.on;a/=1+this.game.getResCraftRatio("thorium");a+=e;a*=this.game.getTicksPerSecondUI();return game.getDisplayValueExt(a)+this.i18n("sec")},getBestRelicBuilding:function(){if(!this.game.religion.getZU("blackPyramid").val){return this.i18n("$religion.zu.blackPyramid.label")}else if(!this.game.religion.getTU("blackNexus").on){return this.i18n("$religion.tu.blackNexus.label")}var e;let t=this.game.getEffect("blsLimit")+16;var a=Math.floor(Math.log(t/5)/Math.log(1.15))+1;var i=0;var r=Math.ceil(this.getButtonPrice("religion",0,"blackPyramid","sorrow"))-this.game.resPool.get("sorrow").maxValue;var n=this.getButtonPrice("religion",2,"blackNexus","relic");var s=this.getButtonPrice("religion",2,"blackCore","relic");var g=(Math.pow(1.15,r)-1)/.15*s;var o=.001*a/n;var l=.001*this.game.religion.getTU("blackNexus").val/g;if(r>0&&o>=l){while(o>=l&&n<Number.MAX_VALUE/1.15){n*=1.15;o=.001*a/n;l+=.001/g;i++}e=this.i18n("$religion.tu.blackNexus.label")+" +"+i+"ä¸ª"}else{e=this.i18n("$religion.tu.blackCore.label")+" +"+r+"ä¸ª";if(r<1){e=this.i18n("$religion.zu.blackPyramid.label")}}return e},getBestUnobtainiumBuilding:function(){if(!game.science.get("nanotechnology").researched){return this.i18n("best.none")}var e=this.getButtonPrice("space",1,"spaceElevator","unobtainium");var t=this.getButtonPrice("space",4,"orbitalArray","eludium");var a=game.space.getBuilding("spaceElevator").val;var i=game.space.getBuilding("orbitalArray").val;var r=1+this.game.getEffect("spaceRatio");var n=(.01+r)*t*1e3;let s=1;if(this.game.science.getPolicy("monarchy").researched){s=1.95}let g=game.village.traits.some(e=>e.name==="chemist")?1+this.game.prestige.getBurnedParagonRatio():0;g=.075*g*s;let o=(.02+r)*(1+this.game.getEffect("craftRatio")+g);var l=o*e;if(n>=l){if(e>game.resPool.resources[9].maxValue){return"éš¾å¾—ç´ ä¸Šé™äº†"}var c=1;while(n>=l&&e<Number.MAX_VALUE/1.15){e*=1.15;r+=.01;l=o*e;n=(.01+r)*t*1e3;c++}return $I("space.planet.cath.spaceElevator.label")+" +"+c+"ä¸ª"}else{return $I("space.planet.piscine.orbitalArray.label")}},getDarkFutureYears:function(){var e=this.game.calendar.darkFutureYears(true);return e<0?this.game.getDisplayValueExt(-e):this.i18n("done")},getAIlv15Time:function(){if(this.game.science.getPolicy("transkittenism").researched){return this.i18n("best.none")}var e=Math.exp(14.5);var t=this.game.resPool.get("gflops").value;var a=this.game.getEffect("gflopsPerTickBase")-this.game.getEffect("gflopsConsumption");if(this.game.bld.get("aiCore").effects["aiLevel"]>=15){return this.i18n("done")}if(a>0){return this.game.toDisplaySeconds((e-t)/(a*this.game.getTicksPerSecondUI()))}else{return this.i18n("infinity")}},getFutureSeason:function(){var e=this.game.calendar.futureSeasonTemporalParadox;if(this.game.bld.get("chronosphere").on==0){return this.i18n("best.none")}else if(e==-1){var t=1}else{var t=e+1}return t},getadjustDay:function(){if(this.game.science.get("antimatter").researched&&(this.game.science.get("blackchain").researched||this.game.resPool.get("blackcoin").value>0)){var e=Math.floor(Math.log(1100/game.calendar.cryptoPrice)/Math.log(1.0000012495));if(e>2){return this.game.toDisplaySeconds(e*2)}else{return this.i18n("best.none")}}else{return this.i18n("best.none")}},stats:{catnip:[{name:"getCatnipInWarmSpring",val:0},{name:"getCatnipColdWinter",title:"å¤§äº 0 æ‰ä¸ä¼šé¥¿æ­»å–µå–µå‘¢",val:0}],science:[{name:"getCelestialPerDay",val:0},{name:"getCelestialAutoSuccess",val:0},{name:"getMaxComped",val:0},{name:"getBlueprintCraft",val:0}],titanium:[{name:"getTitPerZebraTrade",title:"ä¸è´¸æ˜“èˆ¹æœ‰å…³å“¦ğŸš¢",val:0},{name:"getZebraTradesLeftToMaxTit",val:0}],pollution:[{name:"getPollutionTick",val:0},{name:"getCoMax",val:0}],unicorns:[{name:"getBestUniBuilding",val:0},{name:"getNecrocornsPerSecond",val:0},{name:"getLeviChance",val:0}],religion:[{name:"getReligionProductionBonusCap",val:0},{name:"getEpiphany",val:0},{name:"getAfterAdoreEpiphany",val:0},{name:"getAdoreSloar",title:"ä¾›ç‚å­¦å®¶èµç¾ç¾¤æ˜Ÿè§¦å‘æ¡ä»¶å‚è€ƒ",val:0}],Transcend:[{name:"getlowestRatio",val:0},{name:"getRecNextTranscendTierProgress",title:"æœ‰è¿™ä¹ˆå¤šé¡¿æ‚Ÿå†æ¬¡å…ƒè¶…è¶Šæ˜¯æœ€æ•ˆç‡çš„å–µ~",val:0},{name:"getBoolean",val:0}],paragon:[{name:"getParagonProductionBonus",val:0},{name:"getParagonStorageBonus",val:0},{name:"getEffectLeader",val:0}],time:[{name:"getTCPerSacrifice",val:0},{name:"getRelicPerTCRefine",val:0}],resourceRetrieval:[{name:"getTradeTC",title:"è®¡ç®—èµ„æºå›å¤ä¸‹æ¯çƒ§1å¹´ï¼Œå½“å‰å‘¨æœŸéš¾å¾—ç´ é€šè¿‡è´¸æ˜“åˆ©ç»´çš„æ—¶é—´æ°´æ™¶æœŸæœ›æ”¶å…¥",val:0},{name:"getTradeTCAvg",title:"è®¡ç®—èµ„æºå›å¤ä¸‹æ¯çƒ§1å¹´ï¼Œå¹³å‡å‘¨æœŸä¸‹éš¾å¾—ç´ é€šè¿‡è´¸æ˜“åˆ©ç»´å¦å’Œå¤©è§’å…½çš„æ—¶é—´æ°´æ™¶æœŸæœ›æ”¶å…¥",val:0},{name:"getResourceRetrievalTCBackYears",title:"èµ„æºå›å¤çš„å›æœ¬æ—¶é—´ï¼Œä»…ä¾›å‚è€ƒ",val:0}],others:[{name:"getUraniumForThoriumReactors",val:0},{name:"getDarkFutureYears",val:0},{name:"getBestRelicBuilding",val:0},{name:"getBestUnobtainiumBuilding",val:0},{name:"getAIlv15Time",title:"å°å¿ƒæœºå™¨äºº",val:0},{name:"getFutureSeason",title:"éé…‹ç¨‹åº¦",val:0},{name:"getadjustDay",val:0}]},statDefinitions:[{name:"catnip"},{name:"science"},{name:"titanium"},{name:"pollution"},{name:"unicorns"},{name:"religion"},{name:"Transcend"},{name:"paragon"},{name:"time"},{name:"resourceRetrieval"},{name:"others"}],statGroups:null,constructor:function(e,t,a){this.game=e;this.i18ng=t;this.statGroups=[];var i=this;if(a&&this.i18nData[a]){this.lang=a}else{this.lang="en"}this.statDefinitions.forEach(function(e){i.statGroups.push({group:i.stats[e.name],title:i.i18n(e.name)})});for(var r in this.statGroups){for(var n in this.statGroups[r].group){this.statGroups[r].group[n].calculate=this[this.statGroups[r].group[n].name]}}},getStat:function(e){return this[e]()},save:function(e){},load:function(e){},resetState:function(){}});dojo.declare("classes.tab.NummonTab",com.nuclearunicorn.game.ui.tab,{container:null,constructor:function(e){},render:function(e){this.container=e;game.religionTab.render();this.update()},update:function(){dojo.empty(this.container);for(var e in this.game.nummon.statGroups){var t=this.game.nummon.statGroups[e];dojo.create("h1",{innerHTML:t.title},this.container);var a=t.group;var i=dojo.create("table",{class:"statTable"},this.container);for(var r in a){var n=a[r];var s=n.val;if(s==Infinity){s="Infinity"}n.val=this.game.nummon[n.name]();var g=dojo.create("tr",null,i);dojo.create("td",{innerHTML:this.game.nummon.i18n(n.name),title:n.title?n.title:""},g);dojo.create("td",{innerHTML:typeof s=="number"?this.game.getDisplayValueExt(s):s},g)}}}});var NummonInit=function(){var e=$I;var t=localStorage["com.nuclearunicorn.kittengame.language"];var a=[{id:"nummon",class:"NummonStatsManager"}];for(var i in a){var r=a[i];if(gamePage[r.id]==undefined){gamePage[r.id]=new window["classes"]["managers"][r.class](gamePage,e,t);gamePage.managers.push(gamePage[r.id])}else{gamePage[r.id]=new window["classes"]["managers"][r.class](gamePage,e,t)}}gamePage.nummonTab=new classes.tab.NummonTab({name:"Nummon",id:"Nummon"},gamePage);gamePage.nummonTab.visible=true;var n=false;for(let e in gamePage.tabs){if(gamePage.tabs[e].tabId=="Nummon"){n=true}}if(!n){gamePage.addTab(gamePage.nummonTab)}if(localStorage["com.nuclearunicorn.kittengame.language"]=="zh"){gamePage.nummonTab.tabName="æ¦‚è§ˆ"}gamePage.render(true);gamePage.getTab=function(e){switch(e){case"science":return this.libraryTab;case"village":return this.villageTab;case"workshop":return this.workshopTab;case"space":return this.spaceTab;case"stats":return this.statsTab;case"nummon":return this.nummonTab;case"time":return this.timeTab;case"challenges":return this.challengesTab}}};var NummonTryInit=function(){if(typeof gamePage==="undefined"){setTimeout(function(){NummonTryInit()},2e3)}else{NummonInit()}};NummonTryInit();